\chapter{Results}


\section{Trends}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{#setwd('/home/bdetweiler/src/Data_Science/stat-8960-capstone-project/thesis/')}
\hlstd{proportions} \hlkwb{<-} \hlkwd{read_csv}\hlstd{(}\hlstr{'../data/proportions.csv'}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in read\_csv("{}../data/proportions.csv"{}): could not find function "{}read\_csv"{}}}\begin{alltt}
\hlstd{proportions} \hlkwb{<-} \hlkwd{filter}\hlstd{(proportions, year} \hlopt{>} \hlnum{2000}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in as.ts(x): object 'proportions' not found}}\begin{alltt}
\hlcom{# Sort by highest proportion in our last year, 2014}
\hlstd{in.order} \hlkwb{<-} \hlstd{proportions} \hlopt{%>%}
  \hlkwd{filter}\hlstd{(year} \hlopt{==} \hlnum{2014}\hlstd{)} \hlopt{%>%}
  \hlkwd{arrange}\hlstd{(}\hlkwd{desc}\hlstd{(theta))} \hlopt{%>%}
  \hlkwd{pull}\hlstd{(disease)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(year == 2014) \%>\% arrange(desc(theta)) \%>\% : could not find function "{}\%>\%"{}}}\begin{alltt}
\hlstd{proportions}\hlopt{$}\hlstd{disease} \hlkwb{<-} \hlkwd{factor}\hlstd{(proportions}\hlopt{$}\hlstd{disease,} \hlkwc{levels}\hlstd{=in.order)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in factor(proportions\$disease, levels = in.order): object 'proportions' not found}}\begin{alltt}
\hlstd{cdi.theta.2001} \hlkwb{<-} \hlstd{proportions} \hlopt{%>%} \hlkwd{filter}\hlstd{(disease} \hlopt{==} \hlstr{'cdi'} \hlopt{&} \hlstd{year} \hlopt{==} \hlnum{2001}\hlstd{)} \hlopt{%>%} \hlkwd{pull}\hlstd{(theta)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(disease == "{}cdi"{} \& year == 2001) \%>\% pull(theta): could not find function "{}\%>\%"{}}}\begin{alltt}
\hlstd{cdi.theta.2001.2.5} \hlkwb{<-} \hlstd{proportions} \hlopt{%>%} \hlkwd{filter}\hlstd{(disease} \hlopt{==} \hlstr{'cdi'} \hlopt{&} \hlstd{year} \hlopt{==} \hlnum{2001}\hlstd{)} \hlopt{%>%} \hlkwd{pull}\hlstd{(ci2.5)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(disease == "{}cdi"{} \& year == 2001) \%>\% pull(ci2.5): could not find function "{}\%>\%"{}}}\begin{alltt}
\hlstd{cdi.theta.2001.97.5} \hlkwb{<-} \hlstd{proportions} \hlopt{%>%} \hlkwd{filter}\hlstd{(disease} \hlopt{==} \hlstr{'cdi'} \hlopt{&} \hlstd{year} \hlopt{==} \hlnum{2001}\hlstd{)} \hlopt{%>%} \hlkwd{pull}\hlstd{(ci97.5)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(disease == "{}cdi"{} \& year == 2001) \%>\% pull(ci97.5): could not find function "{}\%>\%"{}}}\begin{alltt}
\hlstd{cdi.2001.people} \hlkwb{<-} \hlkwd{round}\hlstd{(cdi.theta.2001} \hlopt{*} \hlnum{35400000}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cdi.theta.2001' not found}}\begin{alltt}
\hlstd{cdi.2001.people.2.5} \hlkwb{<-} \hlkwd{round}\hlstd{(cdi.theta.2001.2.5} \hlopt{*} \hlnum{35400000}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cdi.theta.2001.2.5' not found}}\begin{alltt}
\hlstd{cdi.2001.people.97.5} \hlkwb{<-} \hlkwd{round}\hlstd{(cdi.theta.2001.97.5} \hlopt{*} \hlnum{35400000}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cdi.theta.2001.97.5' not found}}\begin{alltt}
\hlstd{cdi.theta.2014} \hlkwb{<-} \hlstd{proportions} \hlopt{%>%} \hlkwd{filter}\hlstd{(disease} \hlopt{==} \hlstr{'cdi'} \hlopt{&} \hlstd{year} \hlopt{==} \hlnum{2014}\hlstd{)} \hlopt{%>%} \hlkwd{pull}\hlstd{(theta)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(disease == "{}cdi"{} \& year == 2014) \%>\% pull(theta): could not find function "{}\%>\%"{}}}\begin{alltt}
\hlstd{cdi.theta.2014.2.5} \hlkwb{<-} \hlstd{proportions} \hlopt{%>%} \hlkwd{filter}\hlstd{(disease} \hlopt{==} \hlstr{'cdi'} \hlopt{&} \hlstd{year} \hlopt{==} \hlnum{2014}\hlstd{)} \hlopt{%>%} \hlkwd{pull}\hlstd{(ci2.5)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(disease == "{}cdi"{} \& year == 2014) \%>\% pull(ci2.5): could not find function "{}\%>\%"{}}}\begin{alltt}
\hlstd{cdi.theta.2014.97.5} \hlkwb{<-} \hlstd{proportions} \hlopt{%>%} \hlkwd{filter}\hlstd{(disease} \hlopt{==} \hlstr{'cdi'} \hlopt{&} \hlstd{year} \hlopt{==} \hlnum{2014}\hlstd{)} \hlopt{%>%} \hlkwd{pull}\hlstd{(ci97.5)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(disease == "{}cdi"{} \& year == 2014) \%>\% pull(ci97.5): could not find function "{}\%>\%"{}}}\begin{alltt}
\hlstd{cdi.2014.people} \hlkwb{<-} \hlkwd{round}\hlstd{(cdi.theta.2014} \hlopt{*} \hlnum{35400000}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cdi.theta.2014' not found}}\begin{alltt}
\hlstd{cdi.2014.people.2.5} \hlkwb{<-} \hlkwd{round}\hlstd{(cdi.theta.2014.2.5} \hlopt{*} \hlnum{35400000}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cdi.theta.2014.2.5' not found}}\begin{alltt}
\hlstd{cdi.2014.people.97.5}\hlkwb{<-} \hlkwd{round}\hlstd{(cdi.theta.2014.97.5} \hlopt{*} \hlnum{35400000}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cdi.theta.2014.97.5' not found}}\begin{alltt}
\hlstd{delta} \hlkwb{<-} \hlstd{cdi.theta.2014} \hlopt{-} \hlstd{cdi.theta.2001}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cdi.theta.2014' not found}}\begin{alltt}
\hlstd{delta.people} \hlkwb{<-} \hlkwd{round}\hlstd{(delta} \hlopt{*} \hlnum{35400000}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'delta' not found}}\begin{alltt}
\hlstd{cdi.dat} \hlkwb{<-} \hlstd{proportions} \hlopt{%>%}
  \hlkwd{filter}\hlstd{(disease} \hlopt{==} \hlstr{'cdi'}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(disease == "{}cdi"{}): could not find function "{}\%>\%"{}}}\begin{alltt}
\hlstd{fit} \hlkwb{<-} \hlkwd{lm}\hlstd{(theta}\hlopt{~}\hlstd{year,} \hlkwc{data}\hlstd{=cdi.dat)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in is.data.frame(data): object 'cdi.dat' not found}}\begin{alltt}
\hlstd{fit2.5} \hlkwb{<-} \hlkwd{lm}\hlstd{(ci2.5}\hlopt{~}\hlstd{year,} \hlkwc{data}\hlstd{=cdi.dat)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in is.data.frame(data): object 'cdi.dat' not found}}\begin{alltt}
\hlstd{fit97.5} \hlkwb{<-} \hlkwd{lm}\hlstd{(ci97.5}\hlopt{~}\hlstd{year,} \hlkwc{data}\hlstd{=cdi.dat)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in is.data.frame(data): object 'cdi.dat' not found}}\begin{alltt}
\hlstd{est.2015} \hlkwb{<-} \hlstd{(}\hlkwd{tidy}\hlstd{(}\hlkwd{summary}\hlstd{(fit)}\hlopt{$}\hlstd{coefficients)[}\hlnum{1}\hlstd{,}\hlnum{2}\hlstd{]} \hlopt{+} \hlnum{2015} \hlopt{*} \hlkwd{tidy}\hlstd{(}\hlkwd{summary}\hlstd{(fit)}\hlopt{$}\hlstd{coefficients)[}\hlnum{2}\hlstd{,}\hlnum{2}\hlstd{])} \hlopt{*} \hlnum{35400000}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in tidy(summary(fit)\$coefficients): could not find function "{}tidy"{}}}\begin{alltt}
\hlstd{est.2015.2.5} \hlkwb{<-} \hlstd{(}\hlkwd{tidy}\hlstd{(}\hlkwd{summary}\hlstd{(fit2.5)}\hlopt{$}\hlstd{coefficients)[}\hlnum{1}\hlstd{,}\hlnum{2}\hlstd{]} \hlopt{+} \hlnum{2015} \hlopt{*} \hlkwd{tidy}\hlstd{(}\hlkwd{summary}\hlstd{(fit2.5)}\hlopt{$}\hlstd{coefficients)[}\hlnum{2}\hlstd{,}\hlnum{2}\hlstd{])} \hlopt{*} \hlnum{35400000}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in tidy(summary(fit2.5)\$coefficients): could not find function "{}tidy"{}}}\begin{alltt}
\hlstd{est.2015.97.5} \hlkwb{<-} \hlstd{(}\hlkwd{tidy}\hlstd{(}\hlkwd{summary}\hlstd{(fit97.5)}\hlopt{$}\hlstd{coefficients)[}\hlnum{1}\hlstd{,}\hlnum{2}\hlstd{]} \hlopt{+} \hlnum{2015} \hlopt{*} \hlkwd{tidy}\hlstd{(}\hlkwd{summary}\hlstd{(fit97.5)}\hlopt{$}\hlstd{coefficients)[}\hlnum{2}\hlstd{,}\hlnum{2}\hlstd{])} \hlopt{*} \hlnum{35400000}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in tidy(summary(fit97.5)\$coefficients): could not find function "{}tidy"{}}}\begin{alltt}
\hlstd{proportions} \hlopt{%>%}
  \hlkwd{filter}\hlstd{(disease} \hlopt{==} \hlstr{'cdi'}\hlstd{)} \hlopt{%>%}
  \hlkwd{ggplot}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{x} \hlstd{= year,} \hlkwc{y} \hlstd{= theta))} \hlopt{+}
    \hlkwd{geom_errorbar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{ymin}\hlstd{=ci2.5,} \hlkwc{ymax}\hlstd{=ci97.5),} \hlkwc{colour}\hlstd{=}\hlstr{"black"}\hlstd{,} \hlkwc{width}\hlstd{=}\hlnum{.1}\hlstd{)} \hlopt{+}
    \hlkwd{geom_line}\hlstd{()} \hlopt{+}
    \hlkwd{xlim}\hlstd{(}\hlnum{2001}\hlstd{,} \hlnum{2018}\hlstd{)} \hlopt{+}
    \hlkwd{stat_smooth}\hlstd{(}\hlkwc{method}\hlstd{=}\hlstr{"lm"}\hlstd{,} \hlkwc{fullrange}\hlstd{=}\hlnum{TRUE}\hlstd{)} \hlopt{+}
    \hlkwd{geom_point}\hlstd{(}\hlkwc{size}\hlstd{=}\hlnum{1}\hlstd{)} \hlopt{+}
    \hlkwd{labs}\hlstd{(}\hlkwc{title}\hlstd{=}\hlstr{"Inpatient CDI trends"}\hlstd{,} \hlkwc{x}\hlstd{=}\hlstr{"Year"}\hlstd{,} \hlkwc{y}\hlstd{=}\hlstr{"Proportion of inpatients"}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in proportions \%>\% filter(disease == "{}cdi"{}) \%>\% ggplot(aes(x = year, : could not find function "{}\%>\%"{}}}\end{kframe}
\end{knitrout}























